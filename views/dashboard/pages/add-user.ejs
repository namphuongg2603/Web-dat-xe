<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Document</title>
</head>
<body>
    <div class="container" >
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">User Name</label>
            <input type="text" class="form-control" id="userName" placeholder="username">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Name</label>
            <input type="text" class="form-control" id="name" placeholder="name">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Password</label>
            <input type="password" class="form-control" id="password" placeholder="password">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Phone</label>
            <input type="text" class="form-control" id="phone" placeholder="phone">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Age</label>
            <input type="text" class="form-control" id="age" placeholder="age">
        </div>
        <div class="mb-3">
            <div class="form-check">
                <input class="form-check-input" type="radio" name="sex" id="male" value="1" checked>
                <label class="form-check-label" for="flexRadioDefault1">
                    Nam
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="sex" id="female" value="0">
                <label class="form-check-label" for="flexRadioDefault2">
                    Nu
                </label>
            </div>
        </div>

        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Email address</label>
            <input type="text" class="form-control" id="email" placeholder="name@example.com">
        </div>
        <div class="mb-3">
            <label for="formFile" class="form-label">identity_card_image</label>
            <input class="form-control" type="file" id="identity_card_image">
        </div>
        <div class="mb-3">
            <label for="formFile" class="form-label">driver_license_image</label>
            <input class="form-control" type="file" id="driver_license_image">
        </div>
        <div class="mb-3">
            <button type="button" class="btn btn-warning btnThemUser">Them</button>
        </div>
    
    </div>
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
</body>
</html>
<script>

    $(document).on('click','.btnThemUser', function(){
        let userName = $('#userName').val();
        let name     = $('#name').val();
        let password = $('#password').val();
        let phone    = $('#phone').val();
        let age      = $('#age').val();
        let sex      = $('input[name=sex]').val();
        let email    = $('#email').val();
        let identity_card_image    = $('#identity_card_image')[0].files[0];
        let driver_license_image   = $('#driver_license_image')[0].files[0];
        console.log({ userName, name, password, phone, age, sex, email, identity_card_image, driver_license_image });
        let formData = new FormData;

        if( identity_card_image ){
            formData.append('identity_card_image', identity_card_image);
        }

        if( driver_license_image ){
            formData.append('driver_license_image', driver_license_image);
        }

        formData.append('username', userName) 
        formData.append('name', name)
        formData.append('password', password) 
        formData.append('phone', phone)    
        formData.append('age', age)      
        formData.append('sex', sex)       
        formData.append('email', email)     

        $.ajax({
            url: '/users/register',
            method: 'POST',
            enctype: 'multipart/form-data',
            data: formData,
            processData: false,
            contentType: false,
            success: resp => {
                console.log({ resp });
            }
        })
    
    })

</script>